# ConfiguraciÃ³n para PostgreSQL en Render

# Usa el puerto proporcionado por Render si existe
server.port=${PORT:8080}

# Datasource: leer desde variables de entorno (SPRING_*, JDBC_* o DATABASE_*)
spring.datasource.driver-class-name=org.postgresql.Driver
spring.datasource.url=${SPRING_DATASOURCE_URL:${JDBC_DATABASE_URL:${DATABASE_URL:jdbc:postgresql://localhost:5432/appmarket}}}
spring.datasource.username=${SPRING_DATASOURCE_USERNAME:${JDBC_DATABASE_USERNAME:${DATABASE_USERNAME:postgres}}}
spring.datasource.password=${SPRING_DATASOURCE_PASSWORD:${JDBC_DATABASE_PASSWORD:${DATABASE_PASSWORD:}}}

# JPA/Hibernate para PostgreSQL
# No es necesario especificar el dialecto explÃ­citamente, Spring lo detecta automÃ¡ticamente
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.format_sql=false
spring.jpa.properties.hibernate.default_schema=${POSTGRES_SCHEMA:public}

# Logging moderado en producciÃ³n
logging.level.org.springframework.web=INFO
logging.level.org.hibernate.SQL=WARN
logging.level.co.edu.uniquindio.ProyectoFinalp3=INFO
logging.level.org.springframework.security=INFO

# InicializaciÃ³n SQL: desactivada (se asume esquema creado por JPA)
spring.sql.init.mode=never

# ConfiguraciÃ³n de JWT (usar variables de entorno si estÃ¡n presentes)
jwt.secret=${JWT_SECRET:change-me}
jwt.expiration=${JWT_EXPIRATION:86400000}

# CORS: orÃ­genes permitidos (coma-separados). Por defecto: localhost y frontend en Render

# Forzar codificaciÃ³n UTF-8 en web y mensajes
spring.web.encoding.charset=UTF-8
spring.web.encoding.enabled=true
spring.web.encoding.force=true
spring.messages.encoding=UTF-8
# ALLOWED_ORIGINS is read from environment; fallback handled in WebConfig
